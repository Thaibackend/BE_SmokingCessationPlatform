# ===================================
# SMOKING QUIT SUPPORT API - PACKAGE SYSTEM TESTING
# ===================================
# üì¶ Features: Basic/Premium Packages, Auto Quit Plans, Coach Support
# üîó Base URL: https://localhost:7000/api
# üîê Authentication: Bearer Token required for most endpoints

@baseUrl = https://localhost:7000/api
@bearerToken = YOUR_JWT_TOKEN_HERE

# ===================================
# 1. AUTHENTICATION (L·∫•y Bearer Token)
# ===================================

### 1.1 ƒêƒÉng k√Ω account m·ªõi (s·∫Ω t·ª± ƒë·ªông c√≥ g√≥i Basic)
POST {{baseUrl}}/Auth/register
Content-Type: application/json

{
  "username": "user_test_package",
  "email": "test.package@example.com", 
  "password": "Test123@",
  "fullName": "Test Package User"
}

### 1.2 ƒêƒÉng nh·∫≠p ƒë·ªÉ l·∫•y token
POST {{baseUrl}}/Auth/login
Content-Type: application/json

{
  "email": "test.package@example.com",
  "password": "Test123@"
}

# ===================================
# 2. PACKAGE MANAGEMENT (Basic Features)
# ===================================

### 2.1 L·∫•y th√¥ng tin g√≥i hi·ªán t·∫°i c·ªßa user
GET {{baseUrl}}/Package/my-package
Authorization: Bearer {{bearerToken}}

### 2.2 Ki·ªÉm tra quy·ªÅn truy c·∫≠p Premium
GET {{baseUrl}}/Package/premium-access
Authorization: Bearer {{bearerToken}}

### 2.3 Xem t√≠nh nƒÉng c√≥ s·∫µn theo g√≥i hi·ªán t·∫°i
GET {{baseUrl}}/Package/available-features
Authorization: Bearer {{bearerToken}}

# ===================================
# 3. AUTO QUIT PLAN SUGGESTION (Basic Feature)
# ===================================

### 3.1 T·∫°o th√¥ng tin h√∫t thu·ªëc tr∆∞·ªõc (c·∫ßn thi·∫øt cho auto suggestion)
POST {{baseUrl}}/SmokingStatus
Authorization: Bearer {{bearerToken}}
Content-Type: application/json

{
  "cigarettesPerDay": 15,
  "yearsOfSmoking": 5,
  "brand": "Marlboro",
  "status": "Active",
  "pricePerPack": 25000,
  "quitAttempts": 2,
  "lastQuitDate": "2024-01-01T00:00:00Z",
  "averageCostPerDay": 18750
}

### 3.2 L·∫•y ƒë·ªÅ xu·∫•t k·∫ø ho·∫°ch cai thu·ªëc t·ª± ƒë·ªông
GET {{baseUrl}}/Package/suggested-quit-plan
Authorization: Bearer {{bearerToken}}

# ===================================
# 4. PACKAGE UPGRADE (Basic to Premium)
# ===================================

### 4.1 Upgrade l√™n g√≥i Premium (30 ng√†y)
POST {{baseUrl}}/Package/upgrade
Authorization: Bearer {{bearerToken}}
Content-Type: application/json

{
  "newPackageType": "PREMIUM",
  "price": 500000,
  "durationDays": 30,
  "preferredCoachId": 1
}

### 4.2 X√°c nh·∫≠n upgrade th√†nh c√¥ng
GET {{baseUrl}}/Package/my-package
Authorization: Bearer {{bearerToken}}

# ===================================
# 5. PREMIUM FEATURES - STAGE MANAGEMENT
# ===================================

### 5.1 Xem giai ƒëo·∫°n cai thu·ªëc hi·ªán t·∫°i
GET {{baseUrl}}/Premium/stage/current
Authorization: Bearer {{bearerToken}}

### 5.2 C·∫≠p nh·∫≠t ti·∫øn ƒë·ªô giai ƒëo·∫°n hi·ªán t·∫°i
PUT {{baseUrl}}/Premium/stage/update-progress
Authorization: Bearer {{bearerToken}}
Content-Type: application/json

{
  "progressPercentage": 25,
  "userNotes": "ƒê√£ gi·∫£m t·ª´ 15 ƒëi·∫øu xu·ªëng 10 ƒëi·∫øu/ng√†y",
  "cigarettesSmoked": 10,
  "cravingLevel": 6,
  "stressLevel": 7,
  "supportLevel": 8,
  "challenges": "C∆°n th√®m thu·ªëc v√†o bu·ªïi t·ªëi",
  "achievements": "Kh√¥ng h√∫t thu·ªëc trong gi·ªù l√†m vi·ªác"
}

### 5.3 L·∫•y l·ªãch s·ª≠ t·∫•t c·∫£ giai ƒëo·∫°n
GET {{baseUrl}}/Premium/stage/history
Authorization: Bearer {{bearerToken}}

### 5.4 Chuy·ªÉn sang giai ƒëo·∫°n ti·∫øp theo (khi ƒë√£ ho√†n th√†nh giai ƒëo·∫°n hi·ªán t·∫°i)
POST {{baseUrl}}/Premium/stage/advance
Authorization: Bearer {{bearerToken}}
Content-Type: application/json

"INITIAL_QUIT"

# ===================================
# 6. PREMIUM FEATURES - COACH CHAT
# ===================================

### 6.1 G·ª≠i tin nh·∫Øn cho coach
POST {{baseUrl}}/Premium/chat/send
Authorization: Bearer {{bearerToken}}
Content-Type: application/json

{
  "receiverId": 1,
  "content": "Ch√†o coach, em ƒëang g·∫∑p kh√≥ khƒÉn v·ªõi c∆°n th√®m thu·ªëc v√†o bu·ªïi t·ªëi. Coach c√≥ th·ªÉ t∆∞ v·∫•n gi√∫p em kh√¥ng?",
  "messageType": "TEXT"
}

### 6.2 Xem l·ªãch s·ª≠ chat v·ªõi coach
GET {{baseUrl}}/Premium/chat/history/1?pageNumber=1&pageSize=20
Authorization: Bearer {{bearerToken}}

### 6.3 ƒê√°nh d·∫•u tin nh·∫Øn ƒë√£ ƒë·ªçc
POST {{baseUrl}}/Premium/chat/mark-read
Authorization: Bearer {{bearerToken}}
Content-Type: application/json

[1, 2, 3]

# ===================================
# 7. PREMIUM FEATURES - MEETING BOOKING
# ===================================

### 7.1 Book meeting v·ªõi coach
POST {{baseUrl}}/Premium/meeting/book
Authorization: Bearer {{bearerToken}}
Content-Type: application/json

{
  "preferredDate": "2024-12-25T10:00:00Z",
  "meetingType": "INITIAL_CONSULTATION",
  "notes": "T∆∞ v·∫•n k·∫ø ho·∫°ch cai thu·ªëc c√° nh√¢n h√≥a"
}

### 7.2 Xem danh s√°ch meetings c·ªßa m√¨nh
GET {{baseUrl}}/Premium/meeting/my-meetings
Authorization: Bearer {{bearerToken}}

# ===================================
# 8. BRINKMAN INDEX (Available for all packages)
# ===================================

### 8.1 Xem ch·ªâ s·ªë Brinkman Index
GET {{baseUrl}}/SmokingStatus/brinkman-index
Authorization: Bearer {{bearerToken}}

### 8.2 Xem th·ªëng k√™ Brinkman Index so v·ªõi c·ªông ƒë·ªìng
GET {{baseUrl}}/SmokingStatus/brinkman-statistics
Authorization: Bearer {{bearerToken}}

# ===================================
# 9. TEST CASE SCENARIOS
# ===================================

# SCENARIO 1: User Basic mu·ªën d√πng premium features
### 9.1 Th·ª≠ g·ª≠i chat khi ch∆∞a c√≥ Premium (s·∫Ω b·ªã t·ª´ ch·ªëi)
POST {{baseUrl}}/Premium/chat/send
Authorization: Bearer {{bearerToken}}
Content-Type: application/json

{
  "receiverId": 1,
  "content": "Test message from Basic user",
  "messageType": "TEXT"
}

# SCENARIO 2: Different Brinkman Index levels
### 9.2 Test v·ªõi nguy c∆° th·∫•p (Brinkman < 100)
POST {{baseUrl}}/SmokingStatus
Authorization: Bearer {{bearerToken}}
Content-Type: application/json

{
  "cigarettesPerDay": 5,
  "yearsOfSmoking": 2,
  "brand": "Test Light",
  "status": "Active",
  "pricePerPack": 20000,
  "quitAttempts": 1,
  "lastQuitDate": "2024-01-01T00:00:00Z",
  "averageCostPerDay": 6667
}

### 9.3 Test v·ªõi nguy c∆° cao (Brinkman > 200)
POST {{baseUrl}}/SmokingStatus
Authorization: Bearer {{bearerToken}}
Content-Type: application/json

{
  "cigarettesPerDay": 25,
  "yearsOfSmoking": 15,
  "brand": "Test Heavy",
  "status": "Active",
  "pricePerPack": 30000,
  "quitAttempts": 5,
  "lastQuitDate": "2024-01-01T00:00:00Z",
  "averageCostPerDay": 37500
}

# ===================================
# 10. ERROR TESTING
# ===================================

### 10.1 Th·ª≠ upgrade v·ªõi d·ªØ li·ªáu kh√¥ng h·ª£p l·ªá
POST {{baseUrl}}/Package/upgrade
Authorization: Bearer {{bearerToken}}
Content-Type: application/json

{
  "newPackageType": "INVALID_PACKAGE",
  "price": -100,
  "durationDays": 0
}

### 10.2 Th·ª≠ truy c·∫≠p Premium features m√† kh√¥ng c√≥ token
GET {{baseUrl}}/Premium/stage/current

### 10.3 Th·ª≠ book meeting v·ªõi ng√†y trong qu√° kh·ª©
POST {{baseUrl}}/Premium/meeting/book
Authorization: Bearer {{bearerToken}}
Content-Type: application/json

{
  "preferredDate": "2020-01-01T10:00:00Z",
  "meetingType": "FOLLOW_UP",
  "notes": "Test past date"
}

# ===================================
# üìã TESTING CHECKLIST
# ===================================
# ‚úÖ Basic package t·ª± ƒë·ªông t·∫°o khi ƒëƒÉng k√Ω
# ‚úÖ Auto quit plan suggestion ho·∫°t ƒë·ªông
# ‚úÖ Premium upgrade th√†nh c√¥ng
# ‚úÖ Stage management cho Premium users
# ‚úÖ Chat v·ªõi coach (Premium only)
# ‚úÖ Meeting booking (Premium only)
# ‚úÖ Permission checking ƒë√∫ng
# ‚úÖ Error handling ph√π h·ª£p
# ‚úÖ Brinkman Index calculation
# ‚úÖ Different risk levels generate different plans 